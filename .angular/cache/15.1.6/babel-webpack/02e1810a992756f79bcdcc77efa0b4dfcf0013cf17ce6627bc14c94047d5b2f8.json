{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet NewsObjectComponent = class NewsObjectComponent {\n  constructor(ngxXml2jsonService) {\n    this.ngxXml2jsonService = ngxXml2jsonService;\n    this.newsJson = {};\n    this.objectEmpty = {};\n    this.allNews = [];\n    this.reloadNews = true;\n  }\n  ngOnInit() {\n    this.readNewsByRSS();\n  }\n  onClick(e) {\n    console.log(e);\n  }\n  readNewsByRSS() {\n    let xhr = new XMLHttpRequest();\n    let xhr2 = new XMLHttpRequest();\n    let url = 'https://www.cooperativa.cl/noticias/site/tax/port/all/rss____1.xml';\n    let url2 = 'https://www.xataka.com/index.xml';\n    xhr.open('GET', url, true); // llama al url\n    xhr2.open('GET', url2, true);\n    //xhr.setRequestHeader('Content-Type', 'application/xml');\n    //xhr.setRequestHeader('Access-Control-Allow-Origin', 'http://www.cooperativa.cl');\n    xhr.send();\n    xhr2.send();\n    //ejecuta primero antes del send\n    setTimeout(() => {\n      if (xhr.responseText === '') {\n        console.log(xhr);\n        console.log(xhr2);\n        return;\n      }\n      console.log(xhr2);\n      //console.log(xhr.responseText);\n      //parsear XML to JSON en JS\n      const parser = new DOMParser();\n      console.log(xhr.responseText);\n      const xml = parser.parseFromString(xhr.responseText, 'text/xml');\n      const obj = this.ngxXml2jsonService.xmlToJson(xml);\n      //this.newsJson['fuentes'] = obj['rss']['channel']['description'];\n      //this.newsJson ['noticias'] = obj ['rss']['channel']['item'] ;\n      let i = 0;\n      i = Math.floor(Math.random() * 10);\n      console.log(obj);\n      this.newsJson['fuente'] = obj.rss.channel.description;\n      this.allNews = obj.rss.channel.item;\n      this.newsJson['noticias'] = obj.rss.channel.item;\n      /*\n      if (this.newsJson['noticias']['prontus_fotolibre'] && typeof this.newsJson['noticias']['prontus_fotolibre'] === 'string') {\n        this.newsJson['imgNoticia'] = this.newsJson['noticias']['prontus_fotolibre'];\n        console.log(this.newsJson['imgNoticia']);\n      }\n      */\n      console.log(this.newsJson);\n    }, 1000);\n  }\n  nextObject() {\n    this.reloadNews = true;\n    let i = 0;\n    i = Math.floor(Math.random() * 10);\n    this.newsJson['noticias'] = this.allNews[i];\n    if (this.newsJson['noticias']['prontus_fotolibre'] && typeof this.newsJson['noticias']['prontus_fotolibre'] === 'string') {\n      this.newsJson['imgNoticia'] = this.newsJson['noticias']['prontus_fotolibre'];\n      console.log(this.newsJson['imgNoticia']);\n    }\n    this.reloadNews = false;\n  }\n};\nNewsObjectComponent = __decorate([Component({\n  selector: 'app-news-object',\n  templateUrl: './news-object.component.html',\n  styleUrls: ['./news-object.component.less']\n})], NewsObjectComponent);\nexport { NewsObjectComponent };","map":{"version":3,"mappings":"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","names":["Component","NewsObjectComponent","constructor","ngxXml2jsonService","ngOnInit","readNewsByRSS","onClick","e","console","log","xhr","XMLHttpRequest","xhr2","url","url2","open","send","setTimeout","responseText","parser","DOMParser","xml","parseFromString","obj","xmlToJson","i","Math","floor","random","newsJson","rss","channel","description","allNews","item","nextObject","reloadNews","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/fabian/Documentos/develops/web-mrk/src/app/components/news-object/news-object.component.ts"],"sourcesContent":["import { Component, OnInit  } from '@angular/core';\nimport { NgxXml2jsonService } from 'ngx-xml2json';\n\n@Component({\n  selector: 'app-news-object',\n  templateUrl: './news-object.component.html',\n  styleUrls: ['./news-object.component.less']\n})\nexport class NewsObjectComponent implements OnInit {\n\n  public newsJson: any = {};\n\n  public objectEmpty = {};\n\n  constructor(private ngxXml2jsonService: NgxXml2jsonService) { }\n\n  ngOnInit() {\n    this.readNewsByRSS();\n  }\n\n  public allNews = [];\n\n  public reloadNews: boolean = true;\n\n  public onClick(e) {\n    console.log(e);\n  }\n\n  private readNewsByRSS() {\n    let xhr = new XMLHttpRequest();\n    let xhr2 = new XMLHttpRequest();\n    let url = 'https://www.cooperativa.cl/noticias/site/tax/port/all/rss____1.xml';\n    let url2 = 'https://www.xataka.com/index.xml';\n\n    xhr.open('GET', url, true); // llama al url\n    xhr2.open('GET',url2, true);\n    \n    //xhr.setRequestHeader('Content-Type', 'application/xml');\n    //xhr.setRequestHeader('Access-Control-Allow-Origin', 'http://www.cooperativa.cl');\n\n    xhr.send();\n    xhr2.send();\n\n    //ejecuta primero antes del send\n    setTimeout(\n      () => {\n        if (xhr.responseText === '') {\n          console.log(xhr);\n          console.log(xhr2);\n          return;\n        }\n        console.log(xhr2);\n        //console.log(xhr.responseText);\n        //parsear XML to JSON en JS\n        const parser = new DOMParser();\n        console.log(xhr.responseText);\n        const xml = parser.parseFromString(xhr.responseText, 'text/xml');\n        const obj:any = this.ngxXml2jsonService.xmlToJson(xml);\n        //this.newsJson['fuentes'] = obj['rss']['channel']['description'];\n        //this.newsJson ['noticias'] = obj ['rss']['channel']['item'] ;\n        let i = 0;\n        i = Math.floor(Math.random() * 10);\n        console.log(obj);\n        this.newsJson['fuente'] = obj.rss.channel.description;\n        this.allNews = obj.rss.channel.item;\n        this.newsJson['noticias'] = obj.rss.channel.item;\n\n        /*\n        if (this.newsJson['noticias']['prontus_fotolibre'] && typeof this.newsJson['noticias']['prontus_fotolibre'] === 'string') {\n          this.newsJson['imgNoticia'] = this.newsJson['noticias']['prontus_fotolibre'];\n          console.log(this.newsJson['imgNoticia']);\n        }\n        */\n        console.log(this.newsJson);\n      }, 1000\n    );\n  }\n\n  public nextObject() {\n    this.reloadNews = true;\n    let i = 0;\n    i = Math.floor(Math.random() * 10);\n    this.newsJson ['noticias'] = this.allNews[i];\n    if (this.newsJson['noticias']['prontus_fotolibre'] && typeof this.newsJson['noticias']['prontus_fotolibre'] === 'string') {\n      this.newsJson['imgNoticia'] = this.newsJson['noticias']['prontus_fotolibre'];\n      console.log(this.newsJson['imgNoticia']);\n    }\n    this.reloadNews = false;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}